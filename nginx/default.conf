server {
    listen 80;  # Escuchar en el puerto 80

    server_name localhost;

    root /var/www/public;  # Apuntar al directorio 'public'
    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ /index.php?$query_string;  # Redirigir todas las solicitudes a 'index.php'
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;  # Usar PHP-FPM en el puerto 9000 (seg√∫n lo que Railway proporciona)
        fastcgi_param SCRIPT_FILENAME /var/www/public$document_root$fastcgi_script_name;  # Ruta correcta al archivo PHP
        include fastcgi_params;
    }

    location ~ /\.ht {
        deny all;  # Bloquear acceso a archivos ocultos como .htaccess
    }
}
